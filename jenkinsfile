pipeline {
    agent any
    stages {
	    stage ('git checkout') {
		    steps {
		        git pull ' https://github.com/sunil9423/webapp.git'
         	}
        }
        stage ('build') {
            steps {
                sh 'mvn clean install'
        	}
        }
      	stage ('image-build') {
		    steps {
			    sh 'docker service start'
				sh 'docker build -t mytomcat1.11 .'
			}
        }
        stage ('run-container') {
            steps {
                sh 'docker run -d -p 8090:8080 mytomcat1.11 '
            }
        }
    }
}
